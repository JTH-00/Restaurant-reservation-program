# [Java, SpringBoot] Restaurant-reservation-program
인프런 공고 모집으로 한 팀프로젝트 입니다.<br>

배달비가 너무 올라 배달주문 대신 포장 및 방문이 유행한다는 뉴스를 보고
방문 포장 및 식당 예약을 주제로 정한 프로젝트입니다.

## 기획
### 1. 프로젝트 개요
  이 프로젝트는 식당 예약 및 리뷰 사이트로 기본적으로 업주의 경우 자신의 업장에 대해 등록이 가능하며 거기에 세부 정보를 기입 및 업로드를 할 수 있고, 일반 사용자의 경우 해당 업장의 예약 및 리뷰 작성을 하는 프로젝트입니다.

### 2. 시스템 주요 기능
좀 더 자세한 계획서와 요구사항 산출물, 설계는 JIN폴더의 PMP, SRD, SRS 폴더로 확인할 수 있습니다.

○ 비회원
- 비회원은 회원가입을 진행한다. 이 때 여기서 사용자(일반)과 사용자(업주) 가입으로 분류된다.
- 업주 가입의 경우 매장 정보를 추가로 기입하고관리자의 승인을 받아야 한다. 승인 거절 시 해당 아이디로 로그인 시거절 사유를 보여주며 수정 버튼으로 다시 작성할 수 있다.

○ 사용자(일반)
- 사용자(일반) 가입 이후 매장 조회를 통해 매장의 정보와 리뷰를 확인 할 수 있다.
- 자신이 조회하고 있는 매장 또는 리뷰의 부적절한 내용을 확인 시 신고 할 수 있으며, 신고내용 작성 이후 관리자에게 전송한다.
- 매장의 메뉴를 장바구니로 담을 수 있으며, 다른 매장의 메뉴와 같이 담을 시 이전에 담은 장바구니를 비우고 다시 넣겠냐는 알람을 띄운다.
- 조회하고 있는 매장 페이지의 매장 예약 버튼을 누르면 매장 방문 예약이 가능하다. 이때 매장 방문의 경우 자신이 방문할 시간대와 주문할 메뉴를 선택한다.
- 장바구니 + 예약 혹은 장바구니에서 포장 예약을 누를 경우에 예약을 한다. 예약 완료 시 알림으로 사용자에게 시간과 내용을 전송받는다.
- 이용 내역 조회를 하여, 자신이 이용한 매장의 정보와 자신이 주문한 메뉴를 확인할 수 있으며, 리뷰를 작성할 수 있다. 사용자(업주)의 리뷰 답글을 받을 시 알림으로 시간과 내용을 전송받는다.
- 관리자가 작성한 공지사항 또는 이벤트 페이지를 확인할 수 있다.
- 회원 정보 수정을 할 수 있다.
	
○사용자(업주)
- 사용자(업주) 가입 이후 자신의 매장 페이지를 확인하여 회원가입에 기입한 내용을 확인할 수 있다.
- 자신의 매장 페이지에서 리뷰를 확인할 수 있다.
- 자신의 매장 페이지에서 리뷰에 답글을 달 수 있다. 답글 작성 이후 리뷰를 작성한 사용자(일반)에게 알림으로 리뷰 답글을 확인할 수 있게 전송한다.
- 자신의 매장 페이지에서 부적절한 내용의 리뷰를 확인 시 신고 할 수 있으며, 신고내용 작성 이후 관리자에게 전송한다.
- 자신의 매장 페이지에서 업장 등록 정보 수정을 할 수 있다.
- 수익정산 기능으로 달별 또는 일별 수익 및 예약 결제 내역을 확인할 수 있다.
- 관리자가 작성한 공지사항 또는 이벤트 페이지를 확인할 수 있다.
- 회원 정보 수정을 할 수 있다.
- 현재 예약이 잡혀있는 것을 조회 할 수 있다. 이때 경우에 따라 주문 거절을 할 수있으며, 결제까지 완료시 결제 확인 체크를 할수 있다. 둘 다 사용자(일반)에게 알림으로 내용을 전송한다.

○ 관리자
- 사용자(업주)가 작성한 매장 정보 및 매장등록을 승인 또는 거절할 수 있다.거절 시 해당 사유를 작성하여, 사용자(업주)가 확인 하도록 한다.
- 공지사항과 이벤트 게시글을 작성할 수 있다. 이벤트 게시글의 경우 이벤트 시작일과 종료일을 기입하도록 한다.
- 처리된 신고를 조회할 수 있다. 확인 또는 삭제 처리한 신고 내용을 조회한다.
- 차단 처리된 매장을 리스트로 보여주며, 해당 매장 정보 페이지로 이동할 수 있다.
- 신고되었지만 처리하지 않은 매장 신고를 조회할 수 있다. 경우에 따라 확인, 차단을 할 수 있다.
- 신고되었지만 처리하지 않은 리뷰 신고를 조회할 수 있다. 경우에 따라 확인, 삭제, 삭제 및 차단을 할 수 있다.

### 3. 개발기간
- 2023-12-30 ~ 2024-04-16

### 4. 개발환경
- 운영체제 : Window 10
- 개발도구: IntelliJ, VS code, Figma, PostMan
- 개발언어 
   - 프론트 엔드 : React, React Router, SCSS
   - 백 엔드 : Java, SpringBoot, Spring Data JPA, Spring Security, JWT
   - DataBase : MySql
   - 기타: Discord, Notion, Github, Swagger, AWS S3
     
### 5. 기타
회의록 및 도메인 정리 : https://www.notion.so/13efa254db3881109311e0c7c83ce430?v=13efa254db388102bb5d000ca24e8bb4&pvs=4 <br>
figma-디자인: https://www.figma.com/file/cEaZxynI9hTHoGGnggt23n/Restaurant-Reservation?type=design&node-id=22-2&mode=design&t=SjB1H4Yvce4wKo9G-0

## 역할
- 진태흠: 프로젝트 기획 및 문서화, DB설계, 기능구현
- 정승민: 프로젝트 기획 및 기능구현
- 함승완: 디자인 및 기능구현

## 🛠 내가 한 부분
- 프로젝트를 기획하면서 3학년때 배운 내용을 그대로 하여 산출물 제작(객체지향 방법론 , 워터풀모델)
- RESTful API를 고려하여 도메인 수정
- Spring Security의 filterchain 인증 및 인가 관리
- 공지사항 및 이벤트 게시판, 매장 소개 페이지, 리뷰 관련 CRUD
   - AWS S3를 연동하여 사진 저장
      - 이미지 저장경로 ID값과 DB의 ID를 일치하게 하기 위해 @GerneratedValue 대신 직접 ID를 set하여 발생하는 불필요한 Select부분을 없애기위해 이미지 관련 엔티티에 Persistable 인터페이스의 isNew() 구현
   - 이미지 관련 엔티티의 양방향 매핑 CASCADE, orphanRemoval 사용으로 코드를 간략화 하여 반영 및 삭제
   - @EntityGraph 사용을 통한 패치조인으로 N+1 문제 관리
- @DynamicUpdate 사용으로 더티체킹 변경된 부분만 수정
- 매장의 리뷰를 방문포장과 식당 예약 두개를 한번에 같이 리뷰로 조회할 수 있게 하기 위해 네이티브쿼리 UNION 쿼리 사용
